<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
            rel="stylesheet"
            href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
            crossorigin="anonymous"
    />
    <link href="{{ url_for('static', filename='index.css') }}" rel="stylesheet">

    <!-- JS -->
    <script
            src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

    <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"
    ></script>

    <!-- 구글폰트 -->
    <link
            href="https://fonts.googleapis.com/css?family=Hahmlet:wght@900&Stylish&display=swap"
            rel="stylesheet"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.min.js"></script>
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.css"
    />

    <title>재판하는 존경장님</title>

    <!-- 수정 -->
    <style>
        .mainpageBtn {
            margin: 0 0 0 10px;
            cursor: pointer;
        }

        .allListTextCopy {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
    </style>

</head>

<body>

<div class="container">
    <div class="sign">
        <div class="username">어서오세요, {{ id }} 존경장님
            <button class="mainpageBtn btn-sm btn-outline-secondary" type="button" onclick="window.location.href = '/'">메인페이지</button>
            <button class="logoutBtn btn-sm btn-outline-secondary" type="button" onclick="logout()">로그아웃</button>
        </div>
    </div>
    <div class="title">재판하는 존경장님</div>
    <div class="buttons">
        <button
                type="button"
                class="btn btn-light btn-lg btn-block"
                id="myJudge"
                style="border: 1px solid black; margin-top: 0;"
        >
            나의 재판
        </button>
        <button
                type="button"
                class="btn btn-dark btn-lg btn-block"
                id="myComment"
                style="margin-top: 0px;"
        >
            나의 댓글️
        </button>
    </div>
    <!-- 재판하기 리스트 출력 -->
    <div class="list-all">
        <div class="newList">
            <!-- <h3>재판 중</h3> -->
            <ul class="list-group">
                <div id="pagination">
                    {% for post in posts %}
                    <div class="clickPost" onclick="onClickPost('{{ post._id }}')">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <p id="allListText">{{ post.title }}</p>
                            <span class="badge badge-primary badge-pill">{{ post.like }}</span>
                        </li>
                    </div>
                    {% endfor %}
                </div>
                <div id="pagination_comment" style="display: None" >
                    {% for comment in comments %}
                    <div class="clickPost" onclick="onClickPost('{{ comment.post_id }}')">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <p class="allListTextCopy">{{ comment.comment }}</p>
                            <p class="allListTextCopy">{{ comment.post_title }}</p>
                        </li>
                    </div>
                    {% endfor %}
                </div>
                <div id="demo"></div>
            </ul>
        </div>
    </div>
</div>

<script>
    const userId = '{{ id }}';

    //로그인 했을 경우
    if (userId) {
        $('.username').show()
        $('.logoutBtn').show()
    }

    // 로그아웃
    function logout() {
        $.removeCookie('mytoken', {path: '/'});
        window.location.href = "/"
    }

    // 조회수 늘리기
    function onClickPost(id) {

        $.ajax({
            type: 'POST',
            url: '/view',
            async: false,
            data:
                {
                    post_id: id
                },
            success: function (response) {
                window.location.href = `/post?post_id=${id}`
            }
        })
    }

    //나의 재판
    $("#myJudge").click(function () {
        $("#pagination").show();
        $("#pagination_comment").hide();
    });

    //나의 댓글
    $("#myComment").click(function () {
        $("#pagination").hide();
        $("#pagination_comment").show();
    });
</script>
</body>
</html>
